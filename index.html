<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Figures de style - R√©visions Bac</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0; padding: 0;
    background: linear-gradient(to right, #fefcea, #f1da36);
  }
  header {
    background: #2c3e50;
    color: white;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }
  nav {
    display: flex;
    justify-content: center;
    margin: 20px;
    gap: 20px;
  }
  button {
    padding: 12px 25px;
    font-size: 16px;
    cursor: pointer;
    background: #3498db;
    border: none;
    color: white;
    border-radius: 10px;
    transition: background 0.3s, transform 0.2s;
  }
  button:hover {
    background: #2980b9;
    transform: scale(1.05);
  }
  .content {
    max-width: 1000px;
    margin: auto;
    padding: 20px;
  }
  .figure-category {
    margin-top: 30px;
  }
  .figure-category h3 {
    border-bottom: 2px solid #3498db;
    padding-bottom: 5px;
    margin-bottom: 10px;
  }
  .figure-list button {
    display: block;
    width: 100%;
    text-align: left;
    margin: 10px 0;
    background: #fefefe;
    color: #2c3e50;
    padding: 15px;
    font-size: 18px;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  .figure-details {
    background: #ffffff;
    border-left: 5px solid #3498db;
    margin: 10px 0 20px 0;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  .quiz-section {
    display: none;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  }
  .question {
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
  }
  .answer-input {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
  }
  .level-select {
    margin: 20px 0;
    text-align: center;
  }
  .level-select button {
    margin: 5px;
    padding: 10px 18px;
    font-size: 16px;
  }
  #quizFeedback {
    margin-top: 15px;
    font-weight: bold;
  }

  .answer-input {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    margin: 10px 0;
    border: 1px solid #ccc;
    border-radius: 5px;
    outline: none;
    position: relative;
    z-index: 0;
    background-clip: padding-box;
    transition: border-color 0.3s ease;
  }

  /* Au focus : animation du contour multicolor qui tourne */
  .answer-input:focus {
    border: 4px solid transparent;
    background-image: 
      linear-gradient(white, white), 
      linear-gradient(270deg, red, orange, yellow, green, blue, indigo, violet, red);
    background-origin: border-box;
    background-clip: padding-box, border-box;
    animation: rainbow-border-move 1.5s linear infinite; /* dur√©e r√©duite */
    z-index: 1;
  }

  /* Styles par d√©faut (desktop) */
  nav button {
    padding: 10px 20px;
    font-size: 18px;
    margin: 5px;
  }
  
  /* Pour √©crans <= 600px (t√©l√©phones) */
  @media (max-width: 600px) {
    nav button {
      padding: 8px 12px;
      font-size: 66px;
      margin: 3px;
      width: 100%;  /* bouton prend toute la largeur */
    }
    
    .content {
      padding: 10px;
    }
    
    /* Par exemple, empile les boutons au lieu de les mettre c√¥te √† c√¥te */
    nav {
      display: flex;
      flex-direction: column;
      align-items: stretch;
    }
  }


  #menuButtons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap; /* passe √† la ligne si trop large */
    justify-content: center;
  }
  
  @media (max-width: 600px) {
    #menuButtons {
      flex-direction: column;
      gap: 5px;
    }
  }

  

  /* Animation qui fait d√©filer le d√©grad√© arc-en-ciel */
  @keyframes rainbow-border-move {
    0% {
      background-position: 0% 50%;
    }
    100% {
      background-position: 400% 50%;
    }
  }






</style>
</head>
<body>

<header>
  <h1>Figures de Style - R√©visions Bac de Fran√ßais</h1>
</header>

<nav>
  <button onclick="showRevisionMenu()">R√©vision</button>
  <button onclick="showQuizMenu()">Quizz</button>
</nav>

<div class="content">

  <!-- Menu des boutons en haut -->
  <div id="menuButtons" style="text-align:center; margin-bottom:20px; display:none;">

  </div>

  <!-- R√©visions, figures de style, tu peux garder si besoin -->
  <div id="revisions" class="figure-list" style="display:none;">
    <h2>Liste des figures de style</h2>
    <div id="figureButtons"></div>
  </div>

  <!-- Section Quiz -->
  <div id="quiz" class="quiz-section" style="display:none;">
    <h2>Quizz : Trouve la figure de style</h2>
    <div class="level-select" id="levelSelect">
      <p>Choisis ton niveau de difficult√© :</p>
      <button onclick="selectLevel('archi facile')">Archi facile</button>
      <button onclick="selectLevel('facile')">Facile</button>
      <button onclick="selectLevel('moyen')">Moyen</button>
      <button onclick="selectLevel('difficile')">Difficile</button>
      <button onclick="selectLevel('tr√®s difficile')">Tr√®s difficile</button>
      <button onclick="selectLevel('hard core')">Hard core</button>
    </div>
    
    <div id="quizContent" style="display:none;">
      <div class="question" id="quizQuestion"></div>
      <input type="text" id="quizAnswer" class="answer-input" placeholder="Votre r√©ponse ici...">
      <button onclick="checkAnswer()">Valider</button>
      <div id="quizFeedback"></div>
      <button onclick="nextQuestion()" style="margin-top: 15px; display:none;" id="nextBtn">Question suivante</button>
    </div>
  </div>

  <!-- Section Commentaire -->
  <div id="commentaire" style="display:none; text-align:center;">
    <div style="margin-bottom: 15px;">
      <button onclick="showMouvements()">Mouvements Litt√©raires</button>
      <button onclick="showRegistres()">Registres Litt√©raires</button>
    </div>
    <div id="commentaireContent" style="max-width:700px; margin-left:auto; margin-right:auto; text-align:left;">
      <!-- Contenu dynamique -->
    </div>
  </div>

</div>

<script>

  // Donn√©es figures de style pour la partie r√©visions (extraits)
  const categories = {
    "Analogies": {
      "M√©taphore": {
        definition: "Comparaison sans outil comparatif.",
        exemples: ["Cette femme est une d√©esse.", "La mer est un miroir."]
      },
      "Comparaison": {
        definition: "Rapproche deux √©l√©ments avec un outil de comparaison.",
        exemples: ["Il est fort comme un lion.", "Elle chante tel un oiseau."]
      },
      "All√©gorie": {
        definition: "Repr√©sentation d'une id√©e abstraite par une image concr√®te.",
        exemples: ["La faucheuse repr√©sente la mort.", "La colombe est le symbole de la paix."]
      },
      "Personnification": {
        definition: "Attribue des caract√©ristiques humaines √† un objet ou animal.",
        exemples: ["Le vent hurle dans la nuit.", "La rivi√®re chante."]
      },
      "Symbole": {
        definition: "Signe concret pour d√©signer une id√©e abstraite.",
        exemples: ["Le c≈ìur est le symbole de l'amour.", "La balance repr√©sente la justice."]
      },
      "Prosopop√©e": {
        definition: "Faire parler une chose, un animal ou un mort.",
        exemples: ["Et la mer me dit : ‚ÄòJe vais t‚Äôengloutir.‚Äô", "La tombe s‚Äôadressa √† moi."]
      },
      "Allegorie mythologique": {
        definition: "Usage d‚Äôune figure mythique pour illustrer une id√©e.",
        exemples: ["Sisyphe incarne l‚Äôabsurdit√© du travail sans fin.", "Icare symbolise la vanit√© et la chute."]
      }
    },

    "Amplification": {
      "Hyperbole": {
        definition: "Exag√©ration volontaire.",
        exemples: ["Je meurs de faim !", "C'est une montagne de devoirs."]
      },
      "Anaphore": {
        definition: "R√©p√©tition d‚Äôun mot en d√©but de phrase ou vers.",
        exemples: ["Paris outrag√© ! Paris bris√© ! Paris martyris√© !", "J‚Äôaccuse‚Ä¶ J‚Äôaccuse‚Ä¶"]
      },
      "Gradation": {
        definition: "Succession de termes d‚Äôintensit√© croissante ou d√©croissante.",
        exemples: ["Je meurs, je suis mort, je suis enterr√©.", "Va, cours, vole, et nous venge."]
      },
      "Pl√©onasme": {
        definition: "R√©p√©tition superflue de mots.",
        exemples: ["Je l‚Äôai vu de mes propres yeux.", "Monter en haut."]
      },
      "Accumulation": {
        definition: "√ânum√©ration excessive de mots.",
        exemples: ["Adieu, veau, vache, cochon, couv√©e.", "Je vis des rochers, des torrents, des arbres, des ruines."]
      },
      "√ânum√©ration": {
        definition: "Suite de mots de m√™me nature grammaticale.",
        exemples: ["Il faut manger, dormir, travailler.", "Je suis fatigu√©, bless√©, vaincu."]
      }
    },

    "Att√©nuation / Suggestion": {
      "Litote": {
        definition: "Sugg√®re le plus en disant le moins.",
        exemples: ["Ce n'est pas mauvais.", "Il ne m‚Äôa pas d√©plu."]
      },
      "Euph√©misme": {
        definition: "Adoucit une r√©alit√© brutale ou choquante.",
        exemples: ["Il nous a quitt√©s.", "Elle est partie au ciel."]
      },
      "P√©riphrase": {
        definition: "Remplace un mot par une expression qui le d√©finit.",
        exemples: ["La Ville Lumi√®re (Paris).", "L‚Äôastre du jour (le soleil)."]
      },
      "Ellipse": {
        definition: "Omission volontaire d‚Äôun ou plusieurs mots.",
        exemples: ["Je t‚Äôaimais inconstant, qu‚Äôaurais-je fait fid√®le ?", "L‚Äôun voulait partir, l‚Äôautre rester."]
      }
    },

    "Opposition": {
      "Antith√®se": {
        definition: "Oppose deux id√©es.",
        exemples: ["Je vis, je meurs.", "Pr√©sent, je vous fuis ; absent, je vous trouve."]
      },
      "Oxymore": {
        definition: "Deux mots oppos√©s c√¥te √† c√¥te.",
        exemples: ["Une obscure clart√©.", "Un silence assourdissant."]
      },
      "Chiasme": {
        definition: "Croisement d‚Äô√©l√©ments dans deux groupes sym√©triques.",
        exemples: ["Il faut manger pour vivre et non vivre pour manger.", "La neige fait au nord ce qu‚Äôau sud fait le vent."]
      },
      "Paradoxe": {
        definition: "√ânonc√© contraire √† l‚Äôopinion commune ou √† la logique.",
        exemples: ["Les premiers seront les derniers.", "Ce que j‚Äôignore est bien plus vaste que ce que je sais."]
    ,
      },
      "Antiphrase": {
        definition: "Exprime une id√©e par son contraire avec ironie.",
        exemples: ["Quel g√©nie ! (pour quelqu‚Äôun de maladroit)", "C‚Äôest du propre ! (pour quelque chose de sale)"]
      }
    },

    "Jeu sur les sons ou les mots": {
      "Paronomase": {
        definition: "Rapprochement de mots proches par le son mais de sens diff√©rent.",
        exemples: ["Qui se ressemble s‚Äôassemble.", "Tu parles, Charles !"]
      },
      "Assonance": {
        definition: "R√©p√©tition d‚Äôun m√™me son vocalique.",
        exemples: ["Les sanglots longs des violons de l‚Äôautomne.", "Tout m'afflige et me nuit et conspire √† me nuire."]
      },
      "Allit√©ration": {
        definition: "R√©p√©tition d‚Äôun m√™me son consonantique.",
        exemples: ["Pour qui sont ces serpents qui sifflent sur vos t√™tes ?", "Le chat chassait chaque chose qui change."]
      },
      "Calembour": {
        definition: "Jeu de mots fond√© sur des sonorit√©s proches.",
        exemples: ["Je suis le roi des cons, mais le roi quand m√™me.", "√Ä la p√™che aux moules, moules √† gaufres."]
      },
      "Polyptote": {
        definition: "R√©p√©tition d‚Äôun m√™me mot sous diff√©rentes formes grammaticales.",
        exemples: ["Je l‚Äôai vu, voyant qu‚Äôil me voyait.", "Tu es ce que je suis sans √™tre."]
      },
      "Zeugma": {
        definition: "Coordination d‚Äô√©l√©ments disparates sur le plan du sens.",
        exemples: ["Il prit le train et son courage.", "Il a descendu la poubelle et ses espoirs."]
      }
    }
  };

 




  // On g√©n√®re les boutons dans la section r√©visions
  const figureButtonsDiv = document.getElementById('figureButtons');
  for (const cat in categories) {
    const catDiv = document.createElement('div');
    catDiv.classList.add('figure-category');
    const catTitle = document.createElement('h3');
    catTitle.textContent = cat;
    catDiv.appendChild(catTitle);

    for (const figure in categories[cat]) {
      const btn = document.createElement('button');
      btn.textContent = figure;
      btn.onclick = () => {
        // Supprime les d√©tails affich√©s pr√©c√©demment
        const prevDetails = catDiv.querySelectorAll('.figure-details');
        prevDetails.forEach(el => el.remove());

        // Cr√©√© la div d√©tails
        const detailsDiv = document.createElement('div');
        detailsDiv.classList.add('figure-details');
        const defP = document.createElement('p');
        defP.innerHTML = `<strong>D√©finition :</strong> ${categories[cat][figure].definition}`;
        const exP = document.createElement('p');
        exP.innerHTML = `<strong>Exemples :</strong><br> - ${categories[cat][figure].exemples.join('<br> - ')}`;
        detailsDiv.appendChild(defP);
        detailsDiv.appendChild(exP);

        btn.insertAdjacentElement('afterend', detailsDiv);
      };
      catDiv.appendChild(btn);
    }
    figureButtonsDiv.appendChild(catDiv);
  }

  // Gestion affichage sections
  function showSection(section) {
    document.getElementById('revisions').style.display = section === 'revisions' ? 'block' : 'none';
    document.getElementById('quiz').style.display = section === 'quiz' ? 'block' : 'none';
    resetQuiz();
  }

  // Variables quiz
  let currentLevel = null;
  let questions = [];
  let currentQuestionIndex = 0;

  // Questions quiz tri√©es par difficult√© (exemples)
  const quizQuestions = {
    "archi facile": [
      { phrase: "Cette femme est une d√©esse.", reponse: "M√©taphore" },
      { phrase: "La mer est un miroir.", reponse: "M√©taphore" },
      { phrase: "Il est fort comme un lion.", reponse: "Comparaison" },
      { phrase: "Elle chante tel un oiseau.", reponse: "Comparaison" },
      { phrase: "Le vent hurle dans la nuit.", reponse: "Personnification" },
      { phrase: "La rivi√®re chante.", reponse: "Personnification" },
      { phrase: "Le c≈ìur est le symbole de l'amour.", reponse: "Symbole" },
      { phrase: "La balance repr√©sente la justice.", reponse: "Symbole" },
      { phrase: "Et la mer me dit : ‚ÄòJe vais t‚Äôengloutir.‚Äô", reponse: "Prosopop√©e" },
      { phrase: "La tombe s‚Äôadressa √† moi.", reponse: "Prosopop√©e" },
      { phrase: "Je meurs de faim !", reponse: "Hyperbole" },
      { phrase: "C'est une montagne de devoirs.", reponse: "Hyperbole" },
      { phrase: "Paris outrag√© ! Paris bris√© ! Paris martyris√© !", reponse: "Anaphore" },
      { phrase: "J‚Äôaccuse‚Ä¶ J‚Äôaccuse‚Ä¶", reponse: "Anaphore" },
      { phrase: "Je meurs, je suis mort, je suis enterr√©.", reponse: "Gradation" },
      { phrase: "Va, cours, vole, et nous venge.", reponse: "Gradation" },
      { phrase: "Je l‚Äôai vu de mes propres yeux.", reponse: "Pl√©onasme" },
      { phrase: "Monter en haut.", reponse: "Pl√©onasme" },
      { phrase: "Adieu, veau, vache, cochon, couv√©e.", reponse: "Accumulation" },
      { phrase: "Je vis des rochers, des torrents, des arbres, des ruines.", reponse: "Accumulation" },
      { phrase: "Il faut manger, dormir, travailler.", reponse: "√ânum√©ration" },
      { phrase: "Je suis fatigu√©, bless√©, vaincu.", reponse: "√ânum√©ration" },
      { phrase: "Ce n'est pas mauvais.", reponse: "Litote" },
      { phrase: "Il ne m‚Äôa pas d√©plu.", reponse: "Litote" },
      { phrase: "Il nous a quitt√©s.", reponse: "Euph√©misme" },
      { phrase: "Elle est partie au ciel.", reponse: "Euph√©misme" },
      { phrase: "La Ville Lumi√®re (Paris).", reponse: "P√©riphrase" },
      { phrase: "L‚Äôastre du jour (le soleil).", reponse: "P√©riphrase" },
      { phrase: "Je t‚Äôaimais inconstant, qu‚Äôaurais-je fait fid√®le ?", reponse: "Ellipse" },
      { phrase: "L‚Äôun voulait partir, l‚Äôautre rester.", reponse: "Ellipse" },
      { phrase: "Je vis, je meurs.", reponse: "Antith√®se" },
      { phrase: "Pr√©sent, je vous fuis ; absent, je vous trouve.", reponse: "Antith√®se" },
      { phrase: "Une obscure clart√©.", reponse: "Oxymore" },
      { phrase: "Un silence assourdissant.", reponse: "Oxymore" },
      { phrase: "Il faut manger pour vivre et non vivre pour manger.", reponse: "Chiasme" },
      { phrase: "La neige fait au nord ce qu‚Äôau sud fait le vent.", reponse: "Chiasme" },
      { phrase: "Les premiers seront les derniers.", reponse: "Paradoxe" },
      { phrase: "Ce que j‚Äôignore est bien plus vaste que ce que je sais.", reponse: "Paradoxe" },
      { phrase: "Quel g√©nie ! (pour quelqu‚Äôun de maladroit)", reponse: "Antiphrase" },
      { phrase: "C‚Äôest du propre ! (pour quelque chose de sale)", reponse: "Antiphrase" },
      { phrase: "Qui se ressemble s‚Äôassemble.", reponse: "Paronomase" },
      { phrase: "Tu parles, Charles !", reponse: "Paronomase" },
      { phrase: "Les sanglots longs des violons de l‚Äôautomne.", reponse: "Assonance" },
      { phrase: "Tout m'afflige et me nuit et conspire √† me nuire.", reponse: "Assonance" },
      { phrase: "Pour qui sont ces serpents qui sifflent sur vos t√™tes ?", reponse: "Allit√©ration" },
      { phrase: "Le chat chassait chaque chose qui change.", reponse: "Allit√©ration" }
    ],

      "facile": [
    { phrase: "Sisyphe incarne l‚Äôabsurdit√© du travail sans fin.", reponse: "Allegorie mythologique" },
    { phrase: "Icare symbolise la vanit√© et la chute.", reponse: "Allegorie mythologique" },
    { phrase: "Je suis le roi des cons, mais le roi quand m√™me.", reponse: "Calembour" },
    { phrase: "√Ä la p√™che aux moules, moules √† gaufres.", reponse: "Calembour" },
    { phrase: "Je l‚Äôai vu, voyant qu‚Äôil me voyait.", reponse: "Polyptote" },
    { phrase: "Tu es ce que je suis sans √™tre.", reponse: "Polyptote" },
    { phrase: "Il prit le train et son courage.", reponse: "Zeugma" },
    { phrase: "Il a descendu la poubelle et ses espoirs.", reponse: "Zeugma" },
    { phrase: "Les sanglots longs des violons de l‚Äôautomne.", reponse: "Assonance" },
    { phrase: "Tout m'afflige et me nuit et conspire √† me nuire.", reponse: "Assonance" },
    { phrase: "Pour qui sont ces serpents qui sifflent sur vos t√™tes ?", reponse: "Allit√©ration" },
    { phrase: "Le chat chassait chaque chose qui change.", reponse: "Allit√©ration" },
    { phrase: "Je meurs de faim !", reponse: "Hyperbole" },
    { phrase: "C'est une montagne de devoirs.", reponse: "Hyperbole" },
    { phrase: "Paris outrag√© ! Paris bris√© ! Paris martyris√© !", reponse: "Anaphore" },
    { phrase: "J‚Äôaccuse‚Ä¶ J‚Äôaccuse‚Ä¶", reponse: "Anaphore" },
    { phrase: "Je meurs, je suis mort, je suis enterr√©.", reponse: "Gradation" },
    { phrase: "Va, cours, vole, et nous venge.", reponse: "Gradation" },
    { phrase: "Je l‚Äôai vu de mes propres yeux.", reponse: "Pl√©onasme" },
    { phrase: "Monter en haut.", reponse: "Pl√©onasme" },
    { phrase: "Adieu, veau, vache, cochon, couv√©e.", reponse: "Accumulation" },
    { phrase: "Je vis des rochers, des torrents, des arbres, des ruines.", reponse: "Accumulation" },
    { phrase: "Il faut manger, dormir, travailler.", reponse: "√ânum√©ration" },
    { phrase: "Je suis fatigu√©, bless√©, vaincu.", reponse: "√ânum√©ration" },
    { phrase: "Ce n'est pas mauvais.", reponse: "Litote" },
    { phrase: "Il ne m‚Äôa pas d√©plu.", reponse: "Litote" },
    { phrase: "Il nous a quitt√©s.", reponse: "Euph√©misme" },
    { phrase: "Elle est partie au ciel.", reponse: "Euph√©misme" },
    { phrase: "La Ville Lumi√®re (Paris).", reponse: "P√©riphrase" },
    { phrase: "L‚Äôastre du jour (le soleil).", reponse: "P√©riphrase" },
    { phrase: "Je t‚Äôaimais inconstant, qu‚Äôaurais-je fait fid√®le ?", reponse: "Ellipse" },
    { phrase: "L‚Äôun voulait partir, l‚Äôautre rester.", reponse: "Ellipse" },
    { phrase: "Je vis, je meurs.", reponse: "Antith√®se" },
    { phrase: "Pr√©sent, je vous fuis ; absent, je vous trouve.", reponse: "Antith√®se" },
    { phrase: "Une obscure clart√©.", reponse: "Oxymore" },
    { phrase: "Un silence assourdissant.", reponse: "Oxymore" },
    { phrase: "Il faut manger pour vivre et non vivre pour manger.", reponse: "Chiasme" },
    { phrase: "La neige fait au nord ce qu‚Äôau sud fait le vent.", reponse: "Chiasme" },
    { phrase: "Les premiers seront les derniers.", reponse: "Paradoxe" },
    { phrase: "Ce que j‚Äôignore est bien plus vaste que ce que je sais.", reponse: "Paradoxe" },
    { phrase: "Quel g√©nie ! (pour quelqu‚Äôun de maladroit)", reponse: "Antiphrase" },
    { phrase: "C‚Äôest du propre ! (pour quelque chose de sale)", reponse: "Antiphrase" },
    { phrase: "Qui se ressemble s‚Äôassemble.", reponse: "Paronomase" },
    { phrase: "Tu parles, Charles !", reponse: "Paronomase" }
    ],

      "moyen": [
    { phrase: "Sisyphe incarne l‚Äôabsurdit√© du travail sans fin.", reponse: "Allegorie mythologique" },
    { phrase: "Icare symbolise la vanit√© et la chute.", reponse: "Allegorie mythologique" },
    { phrase: "Je suis le roi des cons, mais le roi quand m√™me.", reponse: "Calembour" },
    { phrase: "√Ä la p√™che aux moules, moules √† gaufres.", reponse: "Calembour" },
    { phrase: "Je l‚Äôai vu, voyant qu‚Äôil me voyait.", reponse: "Polyptote" },
    { phrase: "Tu es ce que je suis sans √™tre.", reponse: "Polyptote" },
    { phrase: "Il prit le train et son courage.", reponse: "Zeugma" },
    { phrase: "Il a descendu la poubelle et ses espoirs.", reponse: "Zeugma" },
    { phrase: "Les sanglots longs des violons de l‚Äôautomne.", reponse: "Assonance" },
    { phrase: "Tout m'afflige et me nuit et conspire √† me nuire.", reponse: "Assonance" },
    { phrase: "Pour qui sont ces serpents qui sifflent sur vos t√™tes ?", reponse: "Allit√©ration" },
    { phrase: "Le chat chassait chaque chose qui change.", reponse: "Allit√©ration" },
    { phrase: "Je meurs de faim !", reponse: "Hyperbole" },
    { phrase: "C'est une montagne de devoirs.", reponse: "Hyperbole" },
    { phrase: "Paris outrag√© ! Paris bris√© ! Paris martyris√© !", reponse: "Anaphore" },
    { phrase: "J‚Äôaccuse‚Ä¶ J‚Äôaccuse‚Ä¶", reponse: "Anaphore" },
    { phrase: "Je meurs, je suis mort, je suis enterr√©.", reponse: "Gradation" },
    { phrase: "Va, cours, vole, et nous venge.", reponse: "Gradation" },
    { phrase: "Je l‚Äôai vu de mes propres yeux.", reponse: "Pl√©onasme" },
    { phrase: "Monter en haut.", reponse: "Pl√©onasme" },
    { phrase: "Adieu, veau, vache, cochon, couv√©e.", reponse: "Accumulation" },
    { phrase: "Je vis des rochers, des torrents, des arbres, des ruines.", reponse: "Accumulation" },
    { phrase: "Il faut manger, dormir, travailler.", reponse: "√ânum√©ration" },
    { phrase: "Je suis fatigu√©, bless√©, vaincu.", reponse: "√ânum√©ration" },
    { phrase: "Ce n'est pas mauvais.", reponse: "Litote" },
    { phrase: "Il ne m‚Äôa pas d√©plu.", reponse: "Litote" },
    { phrase: "Il nous a quitt√©s.", reponse: "Euph√©misme" },
    { phrase: "Elle est partie au ciel.", reponse: "Euph√©misme" },
    { phrase: "La Ville Lumi√®re (Paris).", reponse: "P√©riphrase" },
    { phrase: "L‚Äôastre du jour (le soleil).", reponse: "P√©riphrase" },
    { phrase: "Je t‚Äôaimais inconstant, qu‚Äôaurais-je fait fid√®le ?", reponse: "Ellipse" },
    { phrase: "L‚Äôun voulait partir, l‚Äôautre rester.", reponse: "Ellipse" },
    { phrase: "Je vis, je meurs.", reponse: "Antith√®se" },
    { phrase: "Pr√©sent, je vous fuis ; absent, je vous trouve.", reponse: "Antith√®se" },
    { phrase: "Une obscure clart√©.", reponse: "Oxymore" },
    { phrase: "Un silence assourdissant.", reponse: "Oxymore" },
    { phrase: "Il faut manger pour vivre et non vivre pour manger.", reponse: "Chiasme" },
    { phrase: "La neige fait au nord ce qu‚Äôau sud fait le vent.", reponse: "Chiasme" },
    { phrase: "Les premiers seront les derniers.", reponse: "Paradoxe" },
    { phrase: "Ce que j‚Äôignore est bien plus vaste que ce que je sais.", reponse: "Paradoxe" },
    { phrase: "Quel g√©nie ! (pour quelqu‚Äôun de maladroit)", reponse: "Antiphrase" },
    { phrase: "C‚Äôest du propre ! (pour quelque chose de sale)", reponse: "Antiphrase" },
    { phrase: "Qui se ressemble s‚Äôassemble.", reponse: "Paronomase" },
    { phrase: "Tu parles, Charles !", reponse: "Paronomase" }
    ],

    "difficile": [
    { phrase: "L‚Äôarbre pleure ses feuilles au vent de l‚Äôautomne.", reponse: "Personnification" },
    { phrase: "Ce silence est une √©p√©e qui tranche les √¢mes.", reponse: "M√©taphore" },
    { phrase: "L‚Äôombre danse sous la lune blafarde.", reponse: "Personnification" },
    { phrase: "Elle a un sourire d‚Äôargent.", reponse: "M√©taphore" },
    { phrase: "J‚Äôai vu le jour mourir √† l‚Äôhorizon.", reponse: "M√©taphore" },
    { phrase: "Le feu d√©vore la for√™t comme une b√™te affam√©e.", reponse: "Comparaison" },
    { phrase: "Ses mots √©taient des fl√®ches qui transper√ßaient le c≈ìur.", reponse: "M√©taphore" },
    { phrase: "Le temps s‚Äô√©coule en une rivi√®re sans fin.", reponse: "M√©taphore" },
    { phrase: "Il est un lion dans la bataille.", reponse: "Comparaison" },
    { phrase: "La ville, immense fourmili√®re, s‚Äôagite.", reponse: "M√©taphore" },
    { phrase: "Cette v√©rit√© est une √©p√©e √† double tranchant.", reponse: "M√©taphore" },
    { phrase: "La parole est d‚Äôargent, mais le silence est d‚Äôor.", reponse: "Antith√®se" },
    { phrase: "Ses larmes coulaient comme une pluie d‚Äôautomne.", reponse: "Comparaison" },
    { phrase: "Elle criait au vent comme une sir√®ne en d√©tresse.", reponse: "Comparaison" },
    { phrase: "Le corbeau croasse son chant fun√®bre.", reponse: "Personnification" },
    { phrase: "Il pleut des cordes depuis ce matin.", reponse: "M√©taphore" },
    { phrase: "Sa voix est un chant d‚Äôange.", reponse: "M√©taphore" },
    { phrase: "Le regard dur comme la pierre.", reponse: "Comparaison" },
    { phrase: "Le vent mord les visages.", reponse: "Personnification" },
    { phrase: "L‚Äô√©cho r√©p√®te en boucle ses plaintes.", reponse: "Personnification" },
    { phrase: "Je suis l‚Äôombre de mon pass√©.", reponse: "M√©taphore" },
    { phrase: "Le temps est un voleur qui emporte nos souvenirs.", reponse: "M√©taphore" },
    { phrase: "La mer gronde de col√®re.", reponse: "Personnification" },
    { phrase: "Le feu danse au creux de la chemin√©e.", reponse: "Personnification" },
    { phrase: "L‚Äôhiver mord les arbres d√©nud√©s.", reponse: "Personnification" },
    { phrase: "Ses paroles √©taient une pluie de fl√®ches.", reponse: "M√©taphore" },
    { phrase: "Le silence √©tait aussi lourd qu‚Äôune pierre.", reponse: "Comparaison" },
    { phrase: "Elle est belle comme l‚Äôaurore.", reponse: "Comparaison" },
    { phrase: "Les √©toiles scintillent comme des diamants.", reponse: "Comparaison" },
    { phrase: "La nuit tisse sa toile d‚Äôombre.", reponse: "Personnification" },
    { phrase: "Le vent chante une m√©lodie triste.", reponse: "Personnification" },
    { phrase: "Le ciel pleure des larmes de pluie.", reponse: "Personnification" },
    { phrase: "La guerre est une b√™te sauvage.", reponse: "M√©taphore" },
    { phrase: "Son sourire est une arme redoutable.", reponse: "M√©taphore" },
    { phrase: "La for√™t murmure des secrets oubli√©s.", reponse: "Personnification" },
    { phrase: "Le temps file entre nos doigts.", reponse: "M√©taphore" },
    { phrase: "La lumi√®re caresse les collines.", reponse: "Personnification" },
    { phrase: "Le tonnerre gronde dans le lointain.", reponse: "Personnification" },
    { phrase: "Le regard per√ßant du chasseur.", reponse: "Comparaison" },
    { phrase: "L‚Äôombre du pass√© plane sur elle.", reponse: "M√©taphore" },
    { phrase: "La mer avale les secrets des hommes.", reponse: "Personnification" },
    { phrase: "La flamme vacille et danse.", reponse: "Personnification" },
    { phrase: "Le vent fouette les vagues.", reponse: "Personnification" },
    { phrase: "La pluie chante sur le toit.", reponse: "Personnification" },
    { phrase: "Son rire √©clate comme un feu d‚Äôartifice.", reponse: "Comparaison" },
    { phrase: "La terre g√©mit sous les pas des soldats.", reponse: "Personnification" },
    { phrase: "Le feu embrase la plaine.", reponse: "Personnification" }
    ],

    "tr√®s difficile": [
    { phrase: "La douce amertume de ses paroles me br√ªlait le c≈ìur.", reponse: "Oxymore" },
    { phrase: "Un silence assourdissant enveloppait la pi√®ce.", reponse: "Oxymore" },
    { phrase: "Il pleurait de joie am√®re.", reponse: "Oxymore" },
    { phrase: "Cette obscure clart√© √©clairait la nuit.", reponse: "Oxymore" },
    { phrase: "Il est un h√©ros l√¢che.", reponse: "Oxymore" },
    { phrase: "Elle hurle en silence.", reponse: "Oxymore" },
    { phrase: "Le bruit sourd de la nuit.", reponse: "Oxymore" },
    { phrase: "Cette douce violence de l‚Äôamour.", reponse: "Oxymore" },
    { phrase: "Elle est morte vivante dans ses souvenirs.", reponse: "Oxymore" },
    { phrase: "Le feu glac√© de sa col√®re.", reponse: "Oxymore" },
    { phrase: "Il faut manger pour vivre, non vivre pour manger.", reponse: "Chiasme" },
    { phrase: "Je r√™ve ta vie, tu vis mon r√™ve.", reponse: "Chiasme" },
    { phrase: "Il faut travailler pour vivre et non vivre pour travailler.", reponse: "Chiasme" },
    { phrase: "Elle aime la paix, mais la guerre l‚Äôattire.", reponse: "Antith√®se" },
    { phrase: "Je suis petit, mais mon c≈ìur est grand.", reponse: "Antith√®se" },
    { phrase: "Le jour fuit, la nuit arrive.", reponse: "Antith√®se" },
    { phrase: "Les riches s‚Äôenrichissent, les pauvres s‚Äôappauvrissent.", reponse: "Antith√®se" },
    { phrase: "Mieux vaut mourir debout que vivre √† genoux.", reponse: "Paradoxe" },
    { phrase: "Moins on en parle, plus √ßa fait de bruit.", reponse: "Paradoxe" },
    { phrase: "Je sais que je ne sais rien.", reponse: "Paradoxe" },
    { phrase: "Le silence parle plus que les mots.", reponse: "Paradoxe" },
    { phrase: "C‚Äôest une douce torture.", reponse: "Oxymore" },
    { phrase: "Le feu √©teint son propre brasier.", reponse: "Paradoxe" },
    { phrase: "L‚Äôavenir est un pass√© que l‚Äôon ignore.", reponse: "Paradoxe" },
    { phrase: "Il est mort vivant.", reponse: "Oxymore" },
    { phrase: "Cette obscure clart√© qui tombe des √©toiles.", reponse: "Oxymore" },
    { phrase: "Le regard froid du soleil br√ªlant.", reponse: "Oxymore" },
    { phrase: "Il est un vivant mort.", reponse: "Oxymore" },
    { phrase: "Le travail tue l‚Äôennui et l‚Äôennui tue le travail.", reponse: "Chiasme" },
    { phrase: "Elle danse pour ne pas pleurer, elle pleure pour ne pas danser.", reponse: "Chiasme" },
    { phrase: "Le vrai mensonge est celui que l‚Äôon croit.", reponse: "Paradoxe" },
    { phrase: "Il aime ha√Ør.", reponse: "Antith√®se" },
    { phrase: "Elle est une lumi√®re sombre.", reponse: "Oxymore" },
    { phrase: "Le cri muet de la douleur.", reponse: "Oxymore" },
    { phrase: "Les morts parlent aux vivants.", reponse: "Prosopop√©e" },
    { phrase: "Le temps est un voleur qui rend les choses invisibles.", reponse: "Personnification" },
    { phrase: "Le vent danse avec les feuilles mortes.", reponse: "Personnification" },
    { phrase: "La mer engloutit les secrets du pass√©.", reponse: "Personnification" },
    { phrase: "Les √©toiles regardent en silence.", reponse: "Personnification" },
    { phrase: "Le silence hurlait dans la nuit.", reponse: "Oxymore" },
    { phrase: "Le feu glac√© des regrets.", reponse: "Oxymore" },
    { phrase: "La lumi√®re obscure de l‚Äô√¢me.", reponse: "Oxymore" },
    { phrase: "Les chaines dor√©es de l‚Äôesclavage.", reponse: "Oxymore" },
    { phrase: "La douce souffrance de l‚Äôattente.", reponse: "Oxymore" },
    { phrase: "Les larmes s√®ches de la tristesse.", reponse: "Oxymore" },
    { phrase: "Le rire triste des souvenirs.", reponse: "Oxymore" },
    { phrase: "Il est l‚Äôombre lumineuse du pass√©.", reponse: "Oxymore" },
    { phrase: "La libert√© captive son esprit.", reponse: "Paradoxe" }
    ],

    "hard core": [
    { phrase: "Le miroir du temps refl√®te l‚Äô√©ternit√© fugace.", reponse: "M√©taphore fil√©e" },
    { phrase: "La m√©moire est un palais de souvenirs en ruines.", reponse: "M√©taphore fil√©e" },
    { phrase: "Ses pens√©es, des papillons √©ph√©m√®res, volaient sans cesse.", reponse: "M√©taphore fil√©e" },
    { phrase: "La vie est un th√©√¢tre o√π chacun joue sa propre trag√©die.", reponse: "M√©taphore fil√©e" },
    { phrase: "L‚Äôespoir, fragile lumi√®re dans l‚Äôobscurit√© de la nuit.", reponse: "M√©taphore fil√©e" },
    { phrase: "Le fleuve de la vie emporte nos r√™ves vers l‚Äôoc√©an du destin.", reponse: "M√©taphore fil√©e" },
    { phrase: "Le silence, un voile tiss√© d‚Äôombres et de myst√®res.", reponse: "M√©taphore fil√©e" },
    { phrase: "La pens√©e, une mer agit√©e par les vents de l‚Äôangoisse.", reponse: "M√©taphore fil√©e" },
    { phrase: "Le temps, ce sculpteur impitoyable, fa√ßonne nos existences.", reponse: "M√©taphore fil√©e" },
    { phrase: "La nuit, ce manteau d‚Äô√©b√®ne, enveloppe le monde endormi.", reponse: "M√©taphore fil√©e" },
    { phrase: "Un oxymore subtil est la douce douleur qui transperce l‚Äô√¢me.", reponse: "Oxymore" },
    { phrase: "L‚Äô√©cho muet r√©sonne dans le vide de l‚Äôoubli.", reponse: "Paradoxe" },
    { phrase: "Il est mort vivant, un souffle glac√© au c≈ìur br√ªlant.", reponse: "Oxymore" },
    { phrase: "Le feu glac√© des passions d√©vorantes.", reponse: "Oxymore" },
    { phrase: "La lumi√®re obscure qui √©claire les t√©n√®bres de l‚Äôesprit.", reponse: "Oxymore" },
    { phrase: "L‚Äôombre lumineuse du pass√© hantera ses r√™ves.", reponse: "Oxymore" },
    { phrase: "Le chaos organis√© de ses pens√©es tourment√©es.", reponse: "Oxymore" },
    { phrase: "Un paradoxe vivant habite dans son regard.", reponse: "Paradoxe" },
    { phrase: "La v√©rit√© mensong√®re de ses paroles.", reponse: "Paradoxe" },
    { phrase: "Le temps est un voleur qui donne et reprend sans cesse.", reponse: "Paradoxe" },
    { phrase: "Il chante le silence de la temp√™te.", reponse: "Personnification" },
    { phrase: "La mort sourit √† ceux qui la craignent.", reponse: "Personnification" },
    { phrase: "Les √©toiles pleurent des larmes de feu.", reponse: "Personnification" },
    { phrase: "Le vent murmure des secrets oubli√©s des hommes.", reponse: "Personnification" },
    { phrase: "Le soleil, un ≈ìil br√ªlant dans le ciel infini.", reponse: "M√©taphore" },
    { phrase: "Son regard √©tait un ab√Æme insondable.", reponse: "M√©taphore" },
    { phrase: "La vie est une rivi√®re sans retour.", reponse: "M√©taphore" },
    { phrase: "Le c≈ìur, une forteresse imprenable.", reponse: "M√©taphore" },
    { phrase: "Ses mots √©taient des fl√®ches empoisonn√©es.", reponse: "M√©taphore" },
    { phrase: "Le temps file comme une ombre furtive.", reponse: "Comparaison" },
    { phrase: "La douleur est un feu qui consume l‚Äô√¢me.", reponse: "M√©taphore" },
    { phrase: "Le r√™ve est une porte vers l‚Äôinconnu.", reponse: "M√©taphore" },
    { phrase: "Les larmes sont des perles de tristesse.", reponse: "M√©taphore" },
    { phrase: "Le chant des oiseaux est une symphonie de la nature.", reponse: "M√©taphore" },
    { phrase: "L‚Äôespoir est une √©toile qui guide dans la nuit.", reponse: "M√©taphore" },
    { phrase: "La m√©moire est un labyrinthe sans fin.", reponse: "M√©taphore" },
    { phrase: "Le temps est un sablier qui s‚Äô√©coule inexorablement.", reponse: "M√©taphore" },
    { phrase: "Les mots sont des armes invisibles.", reponse: "M√©taphore" },
    { phrase: "Le silence est un cri √©touff√©.", reponse: "Oxymore" },
    { phrase: "Les cha√Ænes dor√©es de l‚Äôesclavage.", reponse: "Oxymore" },
    { phrase: "La lumi√®re noire de l‚Äôignorance.", reponse: "Oxymore" },
    { phrase: "Le rire triste des souvenirs oubli√©s.", reponse: "Oxymore" },
    { phrase: "Le paradoxe de la libert√© captive.", reponse: "Paradoxe" },
    { phrase: "L‚Äôombre brillante de la v√©rit√©.", reponse: "Oxymore" },
    { phrase: "La vie est un th√©√¢tre o√π l‚Äô√¢me joue sans cesse.", reponse: "M√©taphore fil√©e" },
    { phrase: "Le destin, ce marionnettiste invisible, tire les ficelles de nos vies.", reponse: "M√©taphore fil√©e" },
    { phrase: "Les r√™ves, ces bulles de savon, √©clatent au moindre souffle.", reponse: "M√©taphore fil√©e" }
    ],

  };
  
  // Lancement du quiz
  function startQuiz() {
    showSection('quiz');
    document.getElementById('levelSelect').style.display = 'block';
    document.getElementById('quizContent').style.display = 'none';
    resetQuiz();
  }

  // S√©lection niveau
  function selectLevel(level) {
    currentLevel = level;

    // Toujours tirer 5 questions al√©atoires depuis le stock original
    const toutesQuestions = [...quizQuestions[level]];
    shuffleArray(toutesQuestions);
    questionsSession = toutesQuestions.slice(0, SESSION_TAILLE);

    currentQuestionIndex = 0;
    questionsPoseesDansSession = 0;
    resultatsFigures = {};

    document.getElementById('levelSelect').style.display = 'none';
    document.getElementById('quizContent').style.display = 'block';
    showQuestion();
  }

  // Affiche question
  function showQuestion() {
    const q = questionsSession[currentQuestionIndex];
    document.getElementById('quizQuestion').textContent = q.phrase;
    document.getElementById('quizAnswer').value = '';
    document.getElementById('quizFeedback').textContent = '';
    document.getElementById('nextBtn').style.display = 'none';
  }

  const SESSION_TAILLE = 5; // nombre de questions par session
  let resultatsFigures = {}; // { figure: {reussites: x, erreurs: y} }
  let questionsPoseesDansSession = 0;
  let sessionsResultats = []; // Tableau de toutes les sessions
  let numeroSession = 1;      // Compteur de sessions
  let questionsSession = []; // Contiendra les 5 questions actuelles

  function afficherHistoriqueSessions() {
    const resultatsDiv = document.getElementById('resultatsSession');
    if (!resultatsDiv) {
      const div = document.createElement('div');
      div.id = 'resultatsSession';
      document.getElementById('levelSelect').appendChild(div);
    }

    let html = '<h2>Historique des sessions</h2>';
    html += '<table border="1" cellpadding="6" style="border-collapse:collapse; margin-top:10px; width:100%;">';
    html += '<tr><th>Session</th><th>Niveau</th><th>Figure de style</th><th>R√©ussites</th><th>Erreurs</th><th>Graphique</th></tr>';

    for (const session of sessionsResultats) {
      const { numero, level, figures } = session;
      const figureKeys = Object.keys(figures);
      if (figureKeys.length === 0) {
        html += `<tr><td>${numero}</td><td>${level}</td><td colspan="4">Aucune donn√©e</td></tr>`;
      } else {
        for (const figure in figures) {
          const r = figures[figure];
          const total = r.reussites + r.erreurs;
          const largeurReussite = Math.round((r.reussites / total) * 100);
          const largeurErreur = 100 - largeurReussite;

          const barreReussite = `<div style="display:inline-block; background:green; height:20px; width:${largeurReussite}px;"></div>`;
          const barreErreur = `<div style="display:inline-block; background:red; height:20px; width:${largeurErreur}px;"></div>`;

          html += `<tr>
            <td>${numero}</td>
            <td>${level}</td>
            <td>${figure}</td>
            <td>${r.reussites}</td>
            <td>${r.erreurs}</td>
            <td>${barreReussite}${barreErreur}</td>
          </tr>`;
        }
      }
    }

    html += '</table>';
    html += '<button onclick="resetSession()">Recommencer une session</button>';
    html += `
  <div style="margin-top: 10px;">
    <button onclick="resetSession()">Recommencer une session</button>
    <button onclick="effacerHistorique()" style="margin-left:10px; background:red; color:white;">Effacer l‚Äôhistorique</button>
  </div>
`;

    document.getElementById('resultatsSession').innerHTML = html;
  }

  function effacerHistorique() {
    if (confirm("Es-tu s√ªr de vouloir supprimer tout l'historique ?")) {
      localStorage.removeItem('historiqueSessions');
      sessionsResultats = [];
      numeroSession = 1;
      document.getElementById('resultatsSession').innerHTML = '';
      alert("Historique supprim√©.");
    }
  }
    // Chargement des sessions depuis le stockage local si disponible
  const dataStockee = localStorage.getItem('historiqueSessions');
  if (dataStockee) {
    try {
      sessionsResultats = JSON.parse(dataStockee);
      numeroSession = sessionsResultats.length + 1;
      afficherHistoriqueSessions(); // ‚úÖ n'affiche que l'existant, sans ajouter
    } catch (e) {
      console.error("Erreur de parsing du localStorage :", e);
      sessionsResultats = [];
      numeroSession = 1;
    }
  }

  // V√©rifie r√©ponse
  function checkAnswer() {
    const userAnswer = document.getElementById('quizAnswer').value.trim().toLowerCase();
    const currentQuestion = questionsSession[currentQuestionIndex];
    const correctAnswer = currentQuestion.reponse.toLowerCase();

    if (userAnswer === '') {
      alert('Merci de saisir une r√©ponse.');
      return;
    }

    // Initialiser la figure dans resultats si pas encore pr√©sente
    if (!(currentQuestion.figure in resultatsFigures)) {
      resultatsFigures[currentQuestion.figure] = { reussites: 0, erreurs: 0 };
    }

    if (userAnswer === correctAnswer) {
      document.getElementById('quizFeedback').textContent = 'Bonne r√©ponse ! üéâ';
      document.getElementById('quizFeedback').style.color = 'green';
      resultatsFigures[currentQuestion.figure].reussites++;
    } else {
      document.getElementById('quizFeedback').textContent = `Mauvaise r√©ponse. La bonne r√©ponse √©tait : ${currentQuestion.reponse}`;
      document.getElementById('quizFeedback').style.color = 'red';
      resultatsFigures[currentQuestion.figure].erreurs++;
    }

    document.getElementById('nextBtn').style.display = 'inline-block';
    questionsPoseesDansSession++;
    const figure = currentQuestion.reponse; // Utilise la r√©ponse comme nom de figure

    // Enregistre les r√©sultats pour cette figure
    if (!resultatsFigures[figure]) {
      resultatsFigures[figure] = { reussites: 0, erreurs: 0 };
    }
    if (userAnswer === correctAnswer) {
      resultatsFigures[figure].reussites++;
    } else {
      resultatsFigures[figure].erreurs++;
    }
  }

  // Question suivante
  function nextQuestion() {
    currentQuestionIndex++;

    if (questionsPoseesDansSession >= SESSION_TAILLE) {
      afficherResultatsSession();
      return; // on stoppe le quiz pour afficher le r√©sum√©
    }


    showQuestion();
  }

  function afficherResultatsSession() {
    // Sauvegarder les r√©sultats actuels dans l'historique
    const sessionData = {
      numero: numeroSession,
      level: currentLevel,
      figures: JSON.parse(JSON.stringify(resultatsFigures)) // copie profonde
    };
    sessionsResultats.push(sessionData);
    localStorage.setItem('historiqueSessions', JSON.stringify(sessionsResultats));
    numeroSession++;

    // Cr√©er le div s'il n'existe pas
    let resultatsDiv = document.getElementById('resultatsSession');
    if (!resultatsDiv) {
      resultatsDiv = document.createElement('div');
      resultatsDiv.id = 'resultatsSession';
      document.getElementById('levelSelect').appendChild(resultatsDiv);
    }

    let html = '<h2>Historique des sessions</h2>';
    html += '<table border="1" cellpadding="6" style="border-collapse:collapse; margin-top:10px; width:100%;">';
    html += '<tr><th>Session</th><th>Niveau</th><th>Action</th></tr>';

    sessionsResultats.forEach((session, index) => {
      const sessionId = `session-details-${index}`;
      html += `
        <tr style="cursor:pointer;" onclick="toggleSession('${sessionId}')">
          <td>${session.numero}</td>
          <td>${session.level}</td>
          <td><b>‚ñ∂</b> Voir les r√©sultats</td>
        </tr>
        <tr id="${sessionId}" style="display:none;">
          <td colspan="3">
            <table style="width:100%; border:1px solid #ccc; margin-top:5px;">
              <tr><th>Figure</th><th>R√©ussites</th><th>Erreurs</th><th>Graphique</th></tr>
              ${Object.entries(session.figures).map(([figure, r]) => {
                const total = r.reussites + r.erreurs;
                const largeurReussite = Math.round((r.reussites / total) * 100);
                const largeurErreur = 100 - largeurReussite;
                const barreReussite = `<div style="display:inline-block; background:green; height:20px; width:${largeurReussite}px;"></div>`;
                const barreErreur = `<div style="display:inline-block; background:red; height:20px; width:${largeurErreur}px;"></div>`;
                return `
                  <tr>
                    <td>${figure}</td>
                    <td>${r.reussites}</td>
                    <td>${r.erreurs}</td>
                    <td>${barreReussite}${barreErreur}</td>
                  </tr>
                `;
              }).join('')}
            </table>
          </td>
        </tr>
      `;
    });

    html += '</table>';
    html += '<button onclick="resetSession()" style="margin-top:10px;">Recommencer une session</button>';
    html += '<button onclick="effacerHistorique()" style="margin-top:10px; background-color:red; color:white;">Effacer l\'historique</button>';
    resultatsDiv.innerHTML = html;

    // Cacher le quiz et r√©initialiser
    document.getElementById('quizContent').style.display = 'none';
    document.getElementById('levelSelect').style.display = 'block';
  }
  function toggleSession(id) {
    const row = document.getElementById(id);
    if (row.style.display === 'none') {
      row.style.display = '';
    } else {
      row.style.display = 'none';
    }
  }

  function effacerHistorique() {
    if (confirm("Voulez-vous vraiment supprimer tout l'historique ?")) {
      localStorage.removeItem('historiqueSessions');
      sessionsResultats = [];
      numeroSession = 1;
      document.getElementById('resultatsSession').innerHTML = '';
    }
  }

  function resetSession() {
    questionsSession = [];
    resultatsFigures = {};
    questionsPoseesDansSession = 0;
    currentQuestionIndex = 0;
    selectLevel(currentLevel); // relance propre
  }




  // Reset quiz
  function resetQuiz() {
    currentLevel = null;
    questions = [];
    currentQuestionIndex = 0;
    document.getElementById('quizAnswer').value = '';
    document.getElementById('quizFeedback').textContent = '';
    document.getElementById('nextBtn').style.display = 'none';
  }

  // M√©langer tableau (Fisher-Yates)
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }


  // Affiche le sous-menu R√©vision
  function showRevisionMenu() {
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('commentaire').style.display = 'none';
    document.getElementById('revisions').style.display = 'none';  // on cache la liste des figures car on est juste dans menu
    const menu = document.getElementById('menuButtons');
    menu.style.display = 'block';
    // On met un bouton "Figure de style" dans ce menu pour aller vers les r√©visions
    menu.innerHTML = '<button onclick="showRevision()">Figure de style</button>';
  }

  // Affiche la liste des figures de style
  function showRevision() {
    document.getElementById('revisions').style.display = 'block';
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('commentaire').style.display = 'none';
    document.getElementById('menuButtons').style.display = 'none';
  }

  // Affiche le menu Quizz
  function showQuizMenu() {
    document.getElementById('revisions').style.display = 'none';
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('commentaire').style.display = 'none';
    const menu = document.getElementById('menuButtons');
    menu.style.display = 'block';
    // Boutons pour acc√©der au quiz Figure de style ou Commentaire
    menu.innerHTML = `
      <button onclick="startFigureQuiz()">Figure de style</button>
      <button onclick="showCommentaireMenu()">Commentaire</button>
    `;
  }

  // Lance le quiz figure de style
  function startFigureQuiz() {
    document.getElementById('revisions').style.display = 'none';
    document.getElementById('quiz').style.display = 'block';
    document.getElementById('commentaire').style.display = 'none';
    document.getElementById('menuButtons').style.display = 'none';

    document.getElementById('levelSelect').style.display = 'block';
    document.getElementById('quizContent').style.display = 'none';
  }

  // Affiche la section commentaire
  function showCommentaireMenu() {
    document.getElementById('revisions').style.display = 'none';
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('commentaire').style.display = 'block';
    document.getElementById('menuButtons').style.display = 'none';
    document.getElementById('commentaireContent').innerHTML = '';
  }

  // Au chargement, afficher le menu R√©vision par d√©faut
  showRevisionMenu();


  
</script>

</body>
</html>
